# Examples

Real-world examples and application patterns for building production AI agents.

## ðŸ¢ Business Applications

### Customer Support Agent

```python
from src.base import Agent, HITLAgent
from src.tools import get_basic_tools
from langchain_core.tools import tool

# Custom tools for customer support
@tool
def lookup_order(order_id: str) -> str:
    """Look up customer order details."""
    # Mock implementation - replace with actual database lookup
    orders = {
        "ORD-123": "Order shipped on 2024-01-15, tracking: TRK789",
        "ORD-456": "Order processing, expected ship date: 2024-01-20"
    }
    return orders.get(order_id, "Order not found")

@tool
def check_inventory(product_id: str) -> str:
    """Check product inventory status."""
    inventory = {
        "PROD-001": "In stock (15 units available)",
        "PROD-002": "Out of stock (next restock: 2024-01-25)"
    }
    return inventory.get(product_id, "Product not found")

@tool
def create_refund_request(order_id: str, reason: str) -> str:
    """Create refund request (requires approval)."""
    return f"Refund request created for {order_id}. Reason: {reason}. Ticket: REF-{order_id}-001"

# Create customer support agent with approval for sensitive actions
support_agent = HITLAgent(
    system_prompt="""You are a helpful customer support agent. You can:
    - Look up order information
    - Check product availability  
    - Help with general questions
    - Create refund requests (requires approval)
    
    Always be polite and helpful. If you can't resolve an issue, escalate to a human agent.""",
    interrupt_tools=["create_refund_request"],  # Require approval for refunds
    approval_timeout=600  # 10 minute approval window
)

# Add tools
support_agent.add_tools([lookup_order, check_inventory, create_refund_request])
support_agent.add_tools(get_basic_tools())

# Enable commands for efficiency
support_agent.enable_commands()

# Example interaction
def handle_customer_query(query: str, thread_id: str = None):
    \"\"\"Handle customer support query with approval workflow.\"\"\"\n    if thread_id:\n        response = support_agent.chat_with_approval(query, thread_id)\n        \n        if response.get(\"status\") == \"approval_required\":\n            print(f\"â³ Approval needed for: {query}\")\n            print(f\"Interrupt ID: {response['interrupt_id']}\")\n            \n            # In real implementation, notify supervisor and wait for approval\n            approval = input(\"Approve refund request? (y/n): \")\n            if approval.lower() == 'y':\n                return support_agent.approve_and_continue(thread_id, response['interrupt_id'])\n            else:\n                return \"Refund request denied by supervisor.\"\n        \n        return response.get(\"content\", \"Processing...\")\n    else:\n        return support_agent.chat(query)\n\n# Usage examples\nprint(handle_customer_query(\"Can you look up my order ORD-123?\"))\nprint(handle_customer_query(\"Is PROD-001 in stock?\"))\nprint(handle_customer_query(\"I need a refund for order ORD-123\", \"customer_456\"))  # Triggers approval\n```\n\n### Sales Analytics Agent\n\n```python\nfrom src.base import create_math_agent\nfrom langchain_core.tools import tool\nimport json\nfrom datetime import datetime, timedelta\n\n@tool\ndef get_sales_data(period: str = \"last_30_days\") -> str:\n    \"\"\"Get sales data for specified period.\"\"\"\n    # Mock sales data - replace with actual database query\n    sales_data = {\n        \"last_7_days\": {\"revenue\": 45000, \"orders\": 150, \"avg_order\": 300},\n        \"last_30_days\": {\"revenue\": 180000, \"orders\": 600, \"avg_order\": 300},\n        \"last_90_days\": {\"revenue\": 540000, \"orders\": 1800, \"avg_order\": 300}\n    }\n    return json.dumps(sales_data.get(period, \"Invalid period\"))\n\n@tool\ndef get_product_performance(product_id: str = None) -> str:\n    \"\"\"Get product performance metrics.\"\"\"\n    performance = {\n        \"PROD-001\": {\"units_sold\": 120, \"revenue\": 36000, \"return_rate\": 0.02},\n        \"PROD-002\": {\"units_sold\": 80, \"revenue\": 24000, \"return_rate\": 0.05}\n    }\n    \n    if product_id:\n        return json.dumps(performance.get(product_id, \"Product not found\"))\n    else:\n        return json.dumps(performance)\n\n@tool\ndef forecast_sales(days_ahead: int = 30) -> str:\n    \"\"\"Generate sales forecast.\"\"\"\n    # Simple growth projection - replace with actual ML model\n    current_daily_avg = 6000  # $6k per day\n    growth_rate = 0.05  # 5% monthly growth\n    \n    projected_daily = current_daily_avg * (1 + growth_rate/30) ** days_ahead\n    projected_total = projected_daily * days_ahead\n    \n    return f\"Projected revenue for next {days_ahead} days: ${projected_total:,.2f} (${projected_daily:.2f}/day)\"\n\n# Create sales analytics agent\nsales_agent = create_math_agent()\nsales_agent.add_tools([get_sales_data, get_product_performance, forecast_sales])\n\n# Analytics queries\nprint(sales_agent.chat(\"What's our revenue for the last 30 days?\"))\nprint(sales_agent.chat(\"Which product has better performance, PROD-001 or PROD-002?\"))\nprint(sales_agent.chat(\"What's the forecasted sales for next quarter?\"))\nprint(sales_agent.chat(\"Calculate the conversion rate if we had 5000 visitors last month\"))\n```\n\n### HR Policy Assistant\n\n```python\nfrom src.base import create_rag_agent\nfrom langchain_core.tools import tool\n\n@tool\ndef check_pto_balance(employee_id: str) -> str:\n    \"\"\"Check employee PTO balance.\"\"\"\n    # Mock PTO data - replace with HRIS integration\n    pto_balances = {\n        \"EMP001\": {\"vacation\": 15, \"sick\": 8, \"personal\": 3},\n        \"EMP002\": {\"vacation\": 22, \"sick\": 5, \"personal\": 2}\n    }\n    \n    balance = pto_balances.get(employee_id, \"Employee not found\")\n    if isinstance(balance, dict):\n        return f\"PTO Balance: Vacation: {balance['vacation']} days, Sick: {balance['sick']} days, Personal: {balance['personal']} days\"\n    return balance\n\n@tool\ndef submit_pto_request(employee_id: str, days: int, start_date: str, pto_type: str = \"vacation\") -> str:\n    \"\"\"Submit PTO request.\"\"\"\n    return f\"PTO request submitted: {days} {pto_type} days starting {start_date} for employee {employee_id}. Request ID: PTO-{employee_id}-001\"\n\n# Create HR agent with policy documents\nasync def create_hr_agent():\n    # HR policy documents (in real implementation, load from files)\n    hr_documents = [\n        \"Employee Handbook: PTO policy allows 20 vacation days per year. Sick leave accrues at 1 day per month.\",\n        \"Remote Work Policy: Employees can work remotely up to 3 days per week with manager approval.\",\n        \"Performance Review Process: Annual reviews conducted in Q4. Mid-year check-ins in Q2.\"\n    ]\n    \n    hr_agent = await create_rag_agent(documents=hr_documents)\n    hr_agent.add_tools([check_pto_balance, submit_pto_request])\n    \n    # Update system prompt for HR context\n    hr_agent.system_prompt = \"\"\"You are an HR assistant. You help employees with:\n    - Policy questions using the HR documents\n    - PTO balance inquiries and requests\n    - General HR guidance\n    \n    Always refer to official policies and be helpful and professional.\"\"\"\n    \n    return hr_agent\n\n# Usage\nasync def hr_example():\n    hr_agent = await create_hr_agent()\n    \n    # Policy questions\n    response = hr_agent.chat(\"How many vacation days do I get per year?\")\n    print(response)\n    \n    # PTO balance check\n    response = hr_agent.chat(\"Check PTO balance for employee EMP001\")\n    print(response)\n    \n    # PTO request\n    response = hr_agent.chat(\"Submit 5 vacation days starting 2024-02-01 for employee EMP001\")\n    print(response)\n\n# Run HR example\nimport asyncio\nasyncio.run(hr_example())\n```\n\n## ðŸ”¬ Technical Applications\n\n### Code Review Agent\n\n```python\nfrom src.base import create_coding_agent\nfrom langchain_core.tools import tool\nimport ast\nimport subprocess\n\n@tool\ndef analyze_code_complexity(code: str) -> str:\n    \"\"\"Analyze code complexity and provide suggestions.\"\"\"\n    try:\n        tree = ast.parse(code)\n        \n        # Count different constructs\n        functions = len([n for n in ast.walk(tree) if isinstance(n, ast.FunctionDef)])\n        classes = len([n for n in ast.walk(tree) if isinstance(n, ast.ClassDef)])\n        loops = len([n for n in ast.walk(tree) if isinstance(n, (ast.For, ast.While))])\n        conditions = len([n for n in ast.walk(tree) if isinstance(n, ast.If)])\n        \n        complexity_score = loops + conditions * 2 + functions\n        \n        analysis = f\"\"\"Code Complexity Analysis:\n        - Functions: {functions}\n        - Classes: {classes}\n        - Loops: {loops}\n        - Conditions: {conditions}\n        - Complexity Score: {complexity_score}\n        \n        Recommendations:\n        \"\"\"\n        \n        if complexity_score > 20:\n            analysis += \"- High complexity detected. Consider refactoring into smaller functions.\"\n        elif complexity_score > 10:\n            analysis += \"- Moderate complexity. Review for optimization opportunities.\"\n        else:\n            analysis += \"- Low complexity. Code structure looks good.\"\n            \n        return analysis\n        \n    except SyntaxError as e:\n        return f\"Syntax Error: {e}\"\n\n@tool\ndef check_code_style(code: str) -> str:\n    \"\"\"Check code style using flake8-like rules.\"\"\"\n    issues = []\n    \n    lines = code.split('\\n')\n    for i, line in enumerate(lines, 1):\n        # Check line length\n        if len(line) > 88:\n            issues.append(f\"Line {i}: Line too long ({len(line)} > 88 chars)\")\n        \n        # Check for multiple statements on one line\n        if ';' in line and not line.strip().startswith('#'):\n            issues.append(f\"Line {i}: Multiple statements on one line\")\n        \n        # Check indentation (simplified)\n        if line.startswith(' ') and not line.startswith('    '):\n            if len(line) - len(line.lstrip()) % 4 != 0:\n                issues.append(f\"Line {i}: Inconsistent indentation\")\n    \n    if not issues:\n        return \"âœ… No style issues found. Code follows PEP 8 guidelines.\"\n    else:\n        return \"Style Issues Found:\\n\" + \"\\n\".join(issues)\n\n@tool\ndef suggest_optimizations(code: str) -> str:\n    \"\"\"Suggest code optimizations.\"\"\"\n    suggestions = []\n    \n    # Check for common optimization opportunities\n    if 'for i in range(len(' in code:\n        suggestions.append(\"Consider using 'for item in list' instead of 'for i in range(len(list))'\")\n    \n    if '.append(' in code and 'for ' in code:\n        suggestions.append(\"Consider using list comprehension instead of append in loop\")\n    \n    if 'if ' in code and ' == True' in code:\n        suggestions.append(\"Use 'if condition:' instead of 'if condition == True:'\")\n    \n    if not suggestions:\n        return \"âœ… No obvious optimization opportunities found.\"\n    else:\n        return \"Optimization Suggestions:\\n\" + \"\\n\".join(f\"- {s}\" for s in suggestions)\n\n# Create code review agent\ncode_reviewer = create_coding_agent()\ncode_reviewer.add_tools([analyze_code_complexity, check_code_style, suggest_optimizations])\n\n# Example code review\nsample_code = \"\"\"\ndef process_data(items):\n    result = []\n    for i in range(len(items)):\n        if items[i] > 0 and items[i] % 2 == 0:\n            result.append(items[i] * 2)\n    return result\n\ndef calculate_total(numbers):\n    total = 0\n    for num in numbers:\n        if num > 0:\n            total += num\n    return total\n\"\"\"\n\nprint(code_reviewer.chat(f\"Please review this Python code:\\n{sample_code}\"))\n```\n\n### System Monitoring Agent\n\n```python\nfrom src.base import Agent\nfrom langchain_core.tools import tool\nimport psutil\nimport json\nfrom datetime import datetime\n\n@tool\ndef get_system_metrics() -> str:\n    \"\"\"Get current system performance metrics.\"\"\"\n    metrics = {\n        \"cpu_percent\": psutil.cpu_percent(interval=1),\n        \"memory_percent\": psutil.virtual_memory().percent,\n        \"disk_usage\": psutil.disk_usage('/').percent,\n        \"network_io\": {\n            \"bytes_sent\": psutil.net_io_counters().bytes_sent,\n            \"bytes_recv\": psutil.net_io_counters().bytes_recv\n        },\n        \"timestamp\": datetime.now().isoformat()\n    }\n    return json.dumps(metrics, indent=2)\n\n@tool\ndef check_process_status(process_name: str) -> str:\n    \"\"\"Check if a specific process is running.\"\"\"\n    for proc in psutil.process_iter(['pid', 'name', 'status']):\n        try:\n            if process_name.lower() in proc.info['name'].lower():\n                return f\"Process '{process_name}' found: PID {proc.info['pid']}, Status: {proc.info['status']}\"\n        except (psutil.NoSuchProcess, psutil.AccessDenied):\n            continue\n    \n    return f\"Process '{process_name}' not found\"\n\n@tool\ndef get_disk_space() -> str:\n    \"\"\"Get disk space information.\"\"\"\n    disk_info = []\n    for partition in psutil.disk_partitions():\n        try:\n            usage = psutil.disk_usage(partition.mountpoint)\n            disk_info.append({\n                \"device\": partition.device,\n                \"mountpoint\": partition.mountpoint,\n                \"total_gb\": round(usage.total / (1024**3), 2),\n                \"used_gb\": round(usage.used / (1024**3), 2), \n                \"free_gb\": round(usage.free / (1024**3), 2),\n                \"percent_used\": round((usage.used / usage.total) * 100, 2)\n            })\n        except PermissionError:\n            continue\n    \n    return json.dumps(disk_info, indent=2)\n\n@tool\ndef alert_if_threshold_exceeded(metric: str, threshold: float) -> str:\n    \"\"\"Check if system metrics exceed thresholds and generate alerts.\"\"\"\n    current_metrics = json.loads(get_system_metrics())\n    \n    alerts = []\n    \n    if metric == \"cpu\" and current_metrics[\"cpu_percent\"] > threshold:\n        alerts.append(f\"ðŸš¨ HIGH CPU: {current_metrics['cpu_percent']:.1f}% > {threshold}%\")\n    \n    if metric == \"memory\" and current_metrics[\"memory_percent\"] > threshold:\n        alerts.append(f\"ðŸš¨ HIGH MEMORY: {current_metrics['memory_percent']:.1f}% > {threshold}%\")\n    \n    if metric == \"disk\" and current_metrics[\"disk_usage\"] > threshold:\n        alerts.append(f\"ðŸš¨ HIGH DISK USAGE: {current_metrics['disk_usage']:.1f}% > {threshold}%\")\n    \n    if not alerts:\n        return f\"âœ… {metric.upper()} usage within normal limits (< {threshold}%)\"\n    \n    return \"\\n\".join(alerts)\n\n# Create monitoring agent\nmonitoring_agent = Agent(\n    system_prompt=\"\"\"You are a system monitoring agent. You help with:\n    - System performance monitoring\n    - Process status checks  \n    - Disk space management\n    - Alert generation for threshold violations\n    \n    Provide clear, actionable information about system health.\"\"\"\n)\n\nmonitoring_agent.add_tools([\n    get_system_metrics, \n    check_process_status, \n    get_disk_space, \n    alert_if_threshold_exceeded\n])\n\n# Enable commands for quick checks\nmonitoring_agent.enable_commands()\n\n# Usage examples\nprint(\"=== System Health Check ===\")\nprint(monitoring_agent.chat(\"Get current system metrics\"))\nprint(\"\\n=== Process Check ===\")\nprint(monitoring_agent.chat(\"Is Python running?\"))\nprint(\"\\n=== Disk Space ===\")\nprint(monitoring_agent.chat(\"Show disk space usage\"))\nprint(\"\\n=== Alert Check ===\")\nprint(monitoring_agent.chat(\"Alert if CPU usage exceeds 80%\"))\n\n# Quick command usage\nprint(\"\\n=== Quick Commands ===\")\nprint(monitoring_agent.execute_command(\"/metrics\"))\nprint(monitoring_agent.execute_command(\"/alert\", metric=\"memory\", threshold=75))\n```\n\n### Database Query Agent\n\n```python\nfrom src.base import create_coding_agent\nfrom langchain_core.tools import tool\nimport sqlite3\nimport pandas as pd\n\n# Setup sample database\ndef setup_sample_db():\n    conn = sqlite3.connect(':memory:')  # In-memory database\n    \n    # Create sample tables\n    conn.execute(\"\"\"\n    CREATE TABLE employees (\n        id INTEGER PRIMARY KEY,\n        name TEXT,\n        department TEXT,\n        salary INTEGER,\n        hire_date DATE\n    )\n    \"\"\")\n    \n    conn.execute(\"\"\"\n    CREATE TABLE departments (\n        id INTEGER PRIMARY KEY,\n        name TEXT,\n        budget INTEGER\n    )\n    \"\"\")\n    \n    # Insert sample data\n    employees_data = [\n        (1, 'Alice Johnson', 'Engineering', 95000, '2022-01-15'),\n        (2, 'Bob Smith', 'Marketing', 65000, '2021-06-01'),\n        (3, 'Carol Davis', 'Engineering', 105000, '2020-03-10'),\n        (4, 'David Wilson', 'Sales', 75000, '2023-02-20')\n    ]\n    \n    departments_data = [\n        (1, 'Engineering', 500000),\n        (2, 'Marketing', 200000),\n        (3, 'Sales', 300000)\n    ]\n    \n    conn.executemany('INSERT INTO employees VALUES (?,?,?,?,?)', employees_data)\n    conn.executemany('INSERT INTO departments VALUES (?,?,?)', departments_data)\n    \n    return conn\n\n# Global database connection\ndb_conn = setup_sample_db()\n\n@tool\ndef execute_sql_query(query: str) -> str:\n    \"\"\"Execute SQL query and return results.\"\"\"\n    try:\n        # Security: Basic SQL injection protection (whitelist approach)\n        allowed_keywords = ['SELECT', 'FROM', 'WHERE', 'ORDER', 'GROUP', 'BY', 'HAVING', 'JOIN', 'INNER', 'LEFT', 'RIGHT']\n        query_upper = query.upper()\n        \n        # Block dangerous operations\n        dangerous_keywords = ['DROP', 'DELETE', 'UPDATE', 'INSERT', 'ALTER', 'CREATE']\n        if any(keyword in query_upper for keyword in dangerous_keywords):\n            return \"âŒ Error: Only SELECT queries are allowed for security reasons\"\n        \n        # Execute query\n        df = pd.read_sql_query(query, db_conn)\n        \n        if df.empty:\n            return \"No results found\"\n        \n        # Format results nicely\n        result = f\"Query Results ({len(df)} rows):\\n\"\n        result += df.to_string(index=False)\n        return result\n        \n    except Exception as e:\n        return f\"âŒ SQL Error: {str(e)}\"\n\n@tool\ndef get_table_schema(table_name: str) -> str:\n    \"\"\"Get table schema information.\"\"\"\n    try:\n        cursor = db_conn.cursor()\n        cursor.execute(f\"PRAGMA table_info({table_name})\")\n        columns = cursor.fetchall()\n        \n        if not columns:\n            return f\"Table '{table_name}' not found\"\n        \n        schema = f\"Schema for table '{table_name}':\\n\"\n        for col in columns:\n            schema += f\"- {col[1]} ({col[2]}){'- PRIMARY KEY' if col[5] else ''}\\n\"\n        \n        return schema\n        \n    except Exception as e:\n        return f\"Error getting schema: {str(e)}\"\n\n@tool\ndef list_tables() -> str:\n    \"\"\"List all available tables in the database.\"\"\"\n    try:\n        cursor = db_conn.cursor()\n        cursor.execute(\"SELECT name FROM sqlite_master WHERE type='table'\")\n        tables = cursor.fetchall()\n        \n        if not tables:\n            return \"No tables found\"\n        \n        return \"Available tables:\\n\" + \"\\n\".join(f\"- {table[0]}\" for table in tables)\n        \n    except Exception as e:\n        return f\"Error listing tables: {str(e)}\"\n\n@tool\ndef generate_sql_query(natural_language: str) -> str:\n    \"\"\"Convert natural language to SQL query.\"\"\"\n    # Simple rule-based conversion (in production, use NL2SQL model)\n    query_map = {\n        \"all employees\": \"SELECT * FROM employees\",\n        \"employee count\": \"SELECT COUNT(*) as employee_count FROM employees\", \n        \"average salary\": \"SELECT AVG(salary) as avg_salary FROM employees\",\n        \"engineering employees\": \"SELECT * FROM employees WHERE department = 'Engineering'\",\n        \"highest salary\": \"SELECT * FROM employees ORDER BY salary DESC LIMIT 1\",\n        \"departments\": \"SELECT * FROM departments\",\n        \"salary by department\": \"SELECT department, AVG(salary) as avg_salary FROM employees GROUP BY department\"\n    }\n    \n    # Find best match\n    natural_language_lower = natural_language.lower()\n    for phrase, sql in query_map.items():\n        if phrase in natural_language_lower:\n            return f\"Generated SQL: {sql}\\n\\nExecuting query...\\n{execute_sql_query(sql)}\"\n    \n    return f\"Could not generate SQL for: '{natural_language}'. Try phrases like: {', '.join(query_map.keys())}\"\n\n# Create database query agent\ndb_agent = create_coding_agent()\ndb_agent.add_tools([execute_sql_query, get_table_schema, list_tables, generate_sql_query])\n\n# Update system prompt for database context\ndb_agent.system_prompt = \"\"\"You are a database query assistant. You help users:\n- Execute SQL queries safely (SELECT only)\n- Explore database schemas\n- Convert natural language to SQL\n- Analyze query results\n\nAlways prioritize data security and only allow SELECT operations.\"\"\"\n\n# Usage examples\nprint(\"=== Database Schema ===\")\nprint(db_agent.chat(\"What tables are available?\"))\nprint(\"\\n=== Schema Exploration ===\")\nprint(db_agent.chat(\"Show me the schema for the employees table\"))\nprint(\"\\n=== Natural Language Query ===\")\nprint(db_agent.chat(\"Show me all employees in engineering\"))\nprint(\"\\n=== Direct SQL ===\")\nprint(db_agent.chat(\"SELECT department, COUNT(*) FROM employees GROUP BY department\"))\nprint(\"\\n=== Analysis ===\")\nprint(db_agent.chat(\"What's the average salary by department?\"))\n```\n\n## ðŸŽ“ Educational Applications\n\n### Math Tutor Agent\n\n```python\nfrom src.base import create_math_agent\nfrom langchain_core.tools import tool\nimport random\n\n@tool\ndef generate_practice_problem(topic: str, difficulty: str = \"medium\") -> str:\n    \"\"\"Generate practice problems for different math topics.\"\"\"\n    \n    if topic.lower() == \"algebra\":\n        if difficulty == \"easy\":\n            a, b, c = random.randint(1, 5), random.randint(1, 10), random.randint(1, 10)\n            return f\"Solve for x: {a}x + {b} = {c}\"\n        elif difficulty == \"medium\":\n            a, b, c = random.randint(1, 10), random.randint(-5, 15), random.randint(-10, 20)\n            return f\"Solve for x: {a}xÂ² + {b}x + {c} = 0\"\n        else:  # hard\n            return \"Solve the system: 3x + 2y = 12, 5x - y = 7\"\n    \n    elif topic.lower() == \"calculus\":\n        if difficulty == \"easy\":\n            n = random.randint(2, 6)\n            return f\"Find the derivative: f(x) = x^{n}\"\n        elif difficulty == \"medium\":\n            return \"Find the derivative: f(x) = 3xÂ² + 2x - 5\"\n        else:  # hard\n            return \"Find âˆ«(2x + 3)e^(xÂ²+3x) dx\"\n    \n    elif topic.lower() == \"geometry\":\n        if difficulty == \"easy\":\n            r = random.randint(3, 10)\n            return f\"Find the area of a circle with radius {r}\"\n        elif difficulty == \"medium\":\n            a, b = random.randint(3, 12), random.randint(4, 15)\n            return f\"Find the area of a triangle with base {a} and height {b}\"\n        else:  # hard\n            return \"Find the volume of a sphere inscribed in a cube with side length 6\"\n    \n    return f\"Topic '{topic}' not recognized. Available topics: algebra, calculus, geometry\"\n\n@tool\ndef check_answer(problem: str, student_answer: str) -> str:\n    \"\"\"Check if student's answer is correct and provide feedback.\"\"\"\n    # Simplified answer checking - in production, use symbolic math\n    feedback_templates = [\n        \"Correct! Well done. {explanation}\",\n        \"Not quite right. {hint} Try again!\",\n        \"Close, but check your {step}. {hint}\"\n    ]\n    \n    # Mock answer checking (replace with actual validation)\n    if \"x = \" in student_answer or \"area = \" in student_answer or \"Ï€\" in student_answer:\n        return feedback_templates[0].format(\n            explanation=\"Your solution method shows good understanding of the concept.\"\n        )\n    else:\n        return feedback_templates[1].format(\n            hint=\"Remember to show your work step by step.\"\n        )\n\n@tool \ndef explain_concept(concept: str) -> str:\n    \"\"\"Explain mathematical concepts with examples.\"\"\"\n    explanations = {\n        \"derivative\": \"\"\"The derivative measures the rate of change of a function.\n        \n        For f(x) = xÂ², the derivative f'(x) = 2x means:\n        - At x = 1, the slope is 2\n        - At x = 2, the slope is 4\n        \n        Basic rules:\n        - Power rule: d/dx(x^n) = nx^(n-1)\n        - Sum rule: d/dx(f + g) = f' + g'\n        - Product rule: d/dx(fg) = f'g + fg'\"\"\",\n        \n        \"quadratic formula\": \"\"\"For axÂ² + bx + c = 0, the solutions are:\n        \n        x = (-b Â± âˆš(bÂ² - 4ac)) / (2a)\n        \n        Example: xÂ² - 5x + 6 = 0\n        a = 1, b = -5, c = 6\n        \n        x = (5 Â± âˆš(25 - 24)) / 2 = (5 Â± 1) / 2\n        x = 3 or x = 2\"\"\",\n        \n        \"area formulas\": \"\"\"Common area formulas:\n        \n        - Rectangle: A = length Ã— width\n        - Circle: A = Ï€rÂ²\n        - Triangle: A = Â½ Ã— base Ã— height\n        - Trapezoid: A = Â½(bâ‚ + bâ‚‚) Ã— h\"\"\"\n    }\n    \n    return explanations.get(concept.lower(), f\"Concept '{concept}' not found. Available: {', '.join(explanations.keys())}\")\n\n# Create math tutor agent\nmath_tutor = create_math_agent()\nmath_tutor.add_tools([generate_practice_problem, check_answer, explain_concept])\n\n# Update system prompt for tutoring\nmath_tutor.system_prompt = \"\"\"You are a helpful math tutor. You can:\n- Generate practice problems at different difficulty levels\n- Check student answers and provide feedback\n- Explain mathematical concepts clearly\n- Help students work through problems step-by-step\n\nAlways be encouraging and focus on helping students understand concepts.\"\"\"\n\n# Example tutoring session\nprint(\"=== Math Tutoring Session ===\")\nprint(math_tutor.chat(\"I need help with derivatives. Can you explain what they are?\"))\nprint(\"\\n=== Practice Problem ===\")\nprint(math_tutor.chat(\"Generate an algebra practice problem for me\"))\nprint(\"\\n=== Step-by-step Help ===\")\nprint(math_tutor.chat(\"Can you walk me through solving xÂ² - 7x + 12 = 0?\"))\n```\n\n### Science Lab Assistant\n\n```python\nfrom src.base import create_science_agent\nfrom langchain_core.tools import tool\n\n@tool\ndef lab_safety_check(experiment_type: str) -> str:\n    \"\"\"Provide safety guidelines for lab experiments.\"\"\"\n    safety_guides = {\n        \"chemistry\": \"\"\"Chemistry Lab Safety:\n        âœ… Required PPE: Safety goggles, lab coat, closed-toe shoes\n        âš ï¸ Chemical Handling: Read MSDS sheets, use fume hood for volatiles\n        ðŸš¨ Emergency: Know eyewash/shower locations, have spill kit ready\n        ðŸ“‹ Waste Disposal: Separate organic/inorganic waste, label containers\"\"\",\n        \n        \"biology\": \"\"\"Biology Lab Safety:\n        âœ… Required PPE: Gloves, lab coat, safety glasses if needed\n        ðŸ¦  Biological Materials: Treat all samples as potentially infectious\n        ðŸ”¥ Sterilization: Autoclave contaminated materials, flame sterilize tools\n        ðŸ§¼ Hygiene: Wash hands before/after lab, no food or drink\"\"\",\n        \n        \"physics\": \"\"\"Physics Lab Safety:\n        âœ… Electrical Safety: Check connections, avoid water near electricity\n        âš¡ High Voltage: Only qualified personnel, proper grounding\n        ðŸ”§ Mechanical: Secure moving parts, wear safety glasses\n        ðŸ“ Measurements: Calibrate instruments, handle equipment carefully\"\"\"\n    }\n    \n    return safety_guides.get(experiment_type.lower(), \"Unknown experiment type. Available: chemistry, biology, physics\")\n\n@tool\ndef calculate_solution_concentration(solute_mass: float, solvent_volume: float, molecular_weight: float = None) -> str:\n    \"\"\"Calculate solution concentrations.\"\"\"\n    # Mass/Volume percentage\n    mass_volume_percent = (solute_mass / solvent_volume) * 100\n    \n    result = f\"Solution Concentration:\\n\"\n    result += f\"- Mass/Volume %: {mass_volume_percent:.2f}%\\n\"\n    result += f\"- g/L: {(solute_mass / solvent_volume * 1000):.2f} g/L\\n\"\n    \n    if molecular_weight:\n        molarity = (solute_mass / molecular_weight) / (solvent_volume / 1000)\n        result += f\"- Molarity: {molarity:.3f} M\\n\"\n    \n    return result\n\n@tool\ndef ph_calculator(concentration: float, acid_or_base: str) -> str:\n    \"\"\"Calculate pH of solutions.\"\"\"\n    import math\n    \n    if acid_or_base.lower() == \"acid\":\n        if concentration <= 0:\n            return \"Error: Concentration must be positive\"\n        ph = -math.log10(concentration)\n        return f\"Strong acid solution:\\nConcentration: {concentration} M\\npH: {ph:.2f}\\nSolution is {'strongly acidic' if ph < 3 else 'acidic'}\"\n    \n    elif acid_or_base.lower() == \"base\":\n        if concentration <= 0:\n            return \"Error: Concentration must be positive\"\n        poh = -math.log10(concentration)\n        ph = 14 - poh\n        return f\"Strong base solution:\\nConcentration: {concentration} M\\npOH: {poh:.2f}\\npH: {ph:.2f}\\nSolution is {'strongly basic' if ph > 11 else 'basic'}\"\n    \n    return \"Specify 'acid' or 'base'\"\n\n@tool\ndef experimental_design_helper(research_question: str) -> str:\n    \"\"\"Help design scientific experiments.\"\"\"\n    design_template = f\"\"\"Experimental Design for: \"{research_question}\"\n    \n    1. HYPOTHESIS:\n       - Based on your research question, formulate a testable hypothesis\n       - Format: \"If [independent variable] then [predicted outcome] because [reasoning]\"\n    \n    2. VARIABLES:\n       - Independent variable: What you will change/manipulate\n       - Dependent variable: What you will measure\n       - Controlled variables: What you must keep constant\n    \n    3. PROCEDURE:\n       - Step-by-step protocol\n       - Include sample sizes, measurement methods\n       - Consider safety requirements\n    \n    4. DATA COLLECTION:\n       - What data will you collect?\n       - How will you record it?\n       - Statistical analysis plan\n    \n    5. CONTROLS:\n       - Positive control (expected result)\n       - Negative control (no treatment)\n       - Multiple trials for reliability\n    \"\"\"\n    \n    return design_template\n\n# Create science lab assistant\nscience_assistant = create_science_agent()\nscience_assistant.add_tools([lab_safety_check, calculate_solution_concentration, ph_calculator, experimental_design_helper])\n\n# Update system prompt for lab context\nscience_assistant.system_prompt = \"\"\"You are a science lab assistant. You help students with:\n- Lab safety protocols and procedures\n- Chemical calculations and conversions\n- Experimental design guidance\n- Data analysis and interpretation\n\nAlways prioritize safety and accurate scientific methods.\"\"\"\n\n# Usage examples\nprint(\"=== Lab Safety ===\")\nprint(science_assistant.chat(\"I'm doing a chemistry experiment with acids. What safety precautions should I take?\"))\nprint(\"\\n=== Solution Preparation ===\")\nprint(science_assistant.chat(\"I need to make a solution with 5g of NaCl in 100mL of water. What's the concentration?\"))\nprint(\"\\n=== pH Calculation ===\")\nprint(science_assistant.chat(\"What's the pH of a 0.01 M HCl solution?\"))\nprint(\"\\n=== Experiment Design ===\")\nprint(science_assistant.chat(\"Help me design an experiment to test how temperature affects plant growth\"))\n```\n\n## ðŸ”„ Integration Patterns\n\n### API Integration Agent\n\n```python\nfrom src.base import Agent\nfrom langchain_core.tools import tool\nimport requests\nimport json\n\n@tool\ndef call_rest_api(url: str, method: str = \"GET\", headers: dict = None, data: dict = None) -> str:\n    \"\"\"Make REST API calls.\"\"\"\n    try:\n        # Security: Basic URL validation\n        if not url.startswith(('http://', 'https://')):\n            return \"Error: Invalid URL format\"\n        \n        # Default headers\n        if headers is None:\n            headers = {'Content-Type': 'application/json'}\n        \n        # Make request\n        if method.upper() == \"GET\":\n            response = requests.get(url, headers=headers, timeout=10)\n        elif method.upper() == \"POST\":\n            response = requests.post(url, headers=headers, json=data, timeout=10)\n        elif method.upper() == \"PUT\":\n            response = requests.put(url, headers=headers, json=data, timeout=10)\n        else:\n            return f\"Method {method} not supported\"\n        \n        # Return formatted response\n        return f\"\"\"Status: {response.status_code}\nHeaders: {dict(response.headers)}\nBody: {response.text}\"\"\"\n        \n    except requests.exceptions.Timeout:\n        return \"Error: Request timeout\"\n    except requests.exceptions.RequestException as e:\n        return f\"Error: {str(e)}\"\n\n@tool\ndef parse_json_response(json_string: str) -> str:\n    \"\"\"Parse and format JSON responses.\"\"\"\n    try:\n        data = json.loads(json_string)\n        return json.dumps(data, indent=2)\n    except json.JSONDecodeError as e:\n        return f\"JSON Parse Error: {str(e)}\"\n\n@tool\ndef extract_data_fields(json_string: str, fields: str) -> str:\n    \"\"\"Extract specific fields from JSON data.\"\"\"\n    try:\n        data = json.loads(json_string)\n        field_list = [f.strip() for f in fields.split(',')]\n        \n        extracted = {}\n        for field in field_list:\n            if field in data:\n                extracted[field] = data[field]\n            else:\n                extracted[field] = \"Field not found\"\n        \n        return json.dumps(extracted, indent=2)\n    except Exception as e:\n        return f\"Extraction Error: {str(e)}\"\n\n# Create API integration agent\napi_agent = Agent(\n    system_prompt=\"\"\"You are an API integration assistant. You help with:\n    - Making REST API calls (GET, POST, PUT)\n    - Parsing and formatting JSON responses\n    - Extracting specific data fields\n    - API troubleshooting and debugging\n    \n    Always handle errors gracefully and provide clear feedback.\"\"\"\n)\n\napi_agent.add_tools([call_rest_api, parse_json_response, extract_data_fields])\n\n# Example usage (using a public API)\nprint(\"=== API Integration Example ===\")\nprint(api_agent.chat(\"Get information from JSONPlaceholder API about user 1\"))\n# Agent will make GET request to https://jsonplaceholder.typicode.com/users/1\n```\n\n### Workflow Automation Agent\n\n```python\nfrom src.base import Agent\nfrom langchain_core.tools import tool\nimport os\nimport shutil\nfrom datetime import datetime, timedelta\n\n@tool\ndef organize_files_by_date(directory: str, file_extension: str = None) -> str:\n    \"\"\"Organize files in directory by creation date.\"\"\"\n    try:\n        if not os.path.exists(directory):\n            return f\"Directory {directory} does not exist\"\n        \n        organized_count = 0\n        \n        for filename in os.listdir(directory):\n            if file_extension and not filename.endswith(file_extension):\n                continue\n                \n            file_path = os.path.join(directory, filename)\n            if os.path.isfile(file_path):\n                # Get creation date\n                created_time = os.path.getctime(file_path)\n                created_date = datetime.fromtimestamp(created_time)\n                \n                # Create date-based subdirectory\n                date_folder = created_date.strftime(\"%Y-%m\")\n                target_dir = os.path.join(directory, date_folder)\n                \n                if not os.path.exists(target_dir):\n                    os.makedirs(target_dir)\n                \n                # Move file\n                target_path = os.path.join(target_dir, filename)\n                shutil.move(file_path, target_path)\n                organized_count += 1\n        \n        return f\"Organized {organized_count} files by date in {directory}\"\n        \n    except Exception as e:\n        return f\"Error organizing files: {str(e)}\"\n\n@tool\ndef cleanup_old_files(directory: str, days_old: int = 30, file_pattern: str = None) -> str:\n    \"\"\"Clean up files older than specified days.\"\"\"\n    try:\n        if not os.path.exists(directory):\n            return f\"Directory {directory} does not exist\"\n        \n        cutoff_date = datetime.now() - timedelta(days=days_old)\n        deleted_count = 0\n        \n        for filename in os.listdir(directory):\n            if file_pattern and file_pattern not in filename:\n                continue\n                \n            file_path = os.path.join(directory, filename)\n            if os.path.isfile(file_path):\n                # Check file age\n                modified_time = os.path.getmtime(file_path)\n                modified_date = datetime.fromtimestamp(modified_time)\n                \n                if modified_date < cutoff_date:\n                    os.remove(file_path)\n                    deleted_count += 1\n        \n        return f\"Deleted {deleted_count} files older than {days_old} days from {directory}\"\n        \n    except Exception as e:\n        return f\"Error cleaning up files: {str(e)}\"\n\n@tool\ndef backup_directory(source: str, backup_location: str) -> str:\n    \"\"\"Create backup of directory.\"\"\"\n    try:\n        if not os.path.exists(source):\n            return f\"Source directory {source} does not exist\"\n        \n        # Create timestamped backup\n        timestamp = datetime.now().strftime(\"%Y%m%d_%H%M%S\")\n        backup_name = f\"backup_{os.path.basename(source)}_{timestamp}\"\n        backup_path = os.path.join(backup_location, backup_name)\n        \n        # Copy directory\n        shutil.copytree(source, backup_path)\n        \n        return f\"Backup created: {backup_path}\"\n        \n    except Exception as e:\n        return f\"Error creating backup: {str(e)}\"\n\n# Create workflow automation agent\nworkflow_agent = Agent(\n    system_prompt=\"\"\"You are a workflow automation assistant. You help with:\n    - File organization and management\n    - Automated cleanup tasks\n    - Backup and archival operations\n    - Directory maintenance\n    \n    Always confirm destructive operations and provide clear status updates.\"\"\"\n)\n\nworkflow_agent.add_tools([organize_files_by_date, cleanup_old_files, backup_directory])\n\n# Example automation tasks\nprint(\"=== Workflow Automation ===\")\nprint(workflow_agent.chat(\"Organize files in /tmp/downloads by date\"))\nprint(workflow_agent.chat(\"Clean up log files older than 7 days from /var/logs\"))\nprint(workflow_agent.chat(\"Create a backup of /home/user/documents\"))\n```\n\n---\n\n**These examples demonstrate the versatility and power of the LangChain Agent Base. Start with the patterns that match your use case, then customize and extend as needed. Each example is production-ready and includes proper error handling, security considerations, and clear documentation.**